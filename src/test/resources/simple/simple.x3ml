<?xml version="1.0" encoding="UTF-8"?>
<x3ml version="0.1" source_type="XPATH">
    <namespaces>
        <namespace prefix="crm" uri="http://purl.org/NET/cidoc-crm/core#"/>
    </namespaces>
    <mappings>
        <mapping>
            <domain>
                <source>//movie</source>
                <target_node>
                    <entity>
                        <qname>crm:E19_Physical_Object</qname>
                        <value_generator name="PhysicalObject">
                            <arg name="nameOfMuseum">museum/text()</arg>
                            <arg name="entry">identifier/text()</arg>
                        </value_generator>
                    </entity>
                </target_node>
            </domain>
            <link>
                <path>
                    <source>type-wrapper</source>
                    <target_relation>
                        <property>
                            <qname>crm:P2_has_type</qname>
                        </property>
                    </target_relation>
                </path>
                <range>
                    <source>type-wrapper/type</source>
                    <target_node>
                        <entity>
                            <qname>crm:E55_Type</qname>
                            <value_generator name="Type">
                                <arg name="entry">text()</arg>
                            </value_generator>
                            <additional>
                                <property>
                                    <qname>crm:P0_has_deity</qname>
                                </property>
                                <entity>
                                    <qname>crm:E0_God</qname>
                                    <value_generator name="God">
                                        <arg name="label">Gumby</arg>
                                    </value_generator>
                                </entity>
                            </additional>
                        </entity>
                    </target_node>
                </range>
            </link>
            <link>
                <path>
                    <source>type-wrapper</source>
                    <target_relation>
                        <property>
                            <qname>crm:P666_has_nemesis</qname>
                        </property>
                        <intermediate>
                            <entity>
                                <qname>crm:E666_Devil</qname>
                                <value_generator name="Devil">
                                    <arg name="label">Pokey</arg>
                                </value_generator>
                            </entity>
                            <property>
                                <qname>crm:P2_has_type</qname>
                            </property>
                        </intermediate>
                    </target_relation>
                </path>
                <range>
                    <source>type-wrapper/type</source>
                    <target_node>
                        <entity>
                            <qname>crm:E55_Type</qname>
                            <value_generator name="Type">
                                <arg name="entry">text()</arg>
                            </value_generator>
                        </entity>
                    </target_node>
                </range>
            </link>
            <link>
                <path>
                    <source>type-wrapper</source>
                    <target_relation>
                        <!--this should prevent the link from doing anything-->
                        <if>
                            <not>
                                <if>
                                    <exists>avoid/text()</exists>
                                </if>
                            </not>
                        </if>
                        <property>
                            <qname>crm:P888_has_extraneous</qname>
                        </property>
                    </target_relation>
                </path>
                <range>
                    <source>type-wrapper/type</source>
                    <target_node>
                        <entity>
                            <qname>crm:E888_Extra</qname>
                            <value_generator name="Type">
                                <arg name="entry">text()</arg>
                            </value_generator>
                        </entity>
                    </target_node>
                </range>
            </link>
            <link>
                <path>
                    <source>type-wrapper</source>
                    <target_relation>
                        <!--this should prevent the link from doing anything-->
                        <if>
                            <equals value="maybe">avoid/text()</equals>
                        </if>
                        <property>
                            <qname>crm:P888_has_extraneous</qname>
                        </property>
                    </target_relation>
                </path>
                <range>
                    <source>type-wrapper/type</source>
                    <target_node>
                        <entity>
                            <qname>crm:E888_Extra</qname>
                            <value_generator name="Type">
                                <arg name="entry">text()</arg>
                            </value_generator>
                        </entity>
                    </target_node>
                </range>
            </link>
        </mapping>
    </mappings>
</x3ml>